<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Instabiz_授業登録</title>

	<!-- Custom fonts for this template -->
	<link th:href="@{/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
	<link
		href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
		rel="stylesheet">

	<!-- Custom styles for this template -->
	<link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">

	<!--calendar css link-->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

	<style>
		/* table sytle */
		#dataTable th.sorting_disabled::after,
		#dataTable th.sorting_disabled::before {
			display: none !important;
		}

		thead th {
			background-color: #5077ec;

			color: white;
			font-weight: bold;
			text-align: center;

		}

		table.dataTable thead th {
			text-align: center !important;
		}

		table.dataTable tbody td {
			text-align: center !important;
		}


		/* 検索関連style */
		.search-box {
			width: 33%;
			min-width: 250px;
		}

		/*select box css*/
		.select-flex-wrap {
			display: flex;
			flex-wrap: wrap;
			align-items: center;
			width: 100%;
		}

		.select-flex-wrap>* {
			margin-right: 0.5rem;
		}

		.select-flex-wrap>*:last-child {
			margin-right: 0;
		}

		.flex-1 {
			flex: 1 1 0%;
			min-width: 80px;
		}

		.flex-2 {
			flex: 2 1 0%;
			min-width: 120px;
		}

		.flex-5 {
			flex: 5 1 0%;
			min-width: 180px;
		}

		/*calendarと授業時間ボックス css*/
		.calendar-box {
			width: 100%;
			min-height: 350px;
			max-height: 480px;
			background: #f7f7f7;
			border-radius: 16px;
			margin-bottom: 36px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 2.2em;
			color: #bbb;
		}

		.flatpickr-calendar.inline {
			box-shadow: none;
			border-radius: 12px;
			border: 1px solid #ddd;
		}

		.available-time-label {
			font-size: 1.18em;
			font-weight: bold;
			color: #e74a3b;
			margin-bottom: 12px;
			margin-top: 10px;
		}

		.time-buttons-wrap {
			display: grid;
			grid-template-columns: repeat(5, 1fr);
			gap: 13px;
			margin-bottom: 30px;
			justify-items: start;
			min-width: 340px;
			overflow-x: auto;
		}

		.time-btn {
			padding: 13px 0;
			border-radius: 7px;
			border: 1px solid #e74a3b;
			background: #fff0f0;
			color: #e74a3b;
			font-size: 1.12em;
			cursor: pointer;
			transition: background .2s, color .2s;
			margin-bottom: 0;
			width: 100%;
			box-sizing: border-box;
			text-align: center;
		}

		.time-btn.selected,
		.time-btn:hover {
			background: #e74a3b;
			color: #fff;
		}

		/*授業種類のチェックボックス　css*/
		.radio-row {
			display: flex;
			flex-direction: row;
			align-items: center;
		}

		.radio-row label {
			margin-right: 50px;
		}
		

		

	</style>
</head>

<body id="page-top">

	<!-- Page Wrapper -->
	<div id="wrapper">

		<div th:replace="~{fragments/sidebar-admin :: sidebar-admin}"></div>

		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<div th:replace="~{fragments/topbar :: topbar('授業登録')}"></div>

				<!-- Begin Page Content -->
				<div class="container-fluid">

					<div class="card shadow mb-4">
						<div class="card-body">

							<!--button collapseのplace-->
							<div id="btnAccordion">
								<!--授業選択ボタン-->
								<div class="card">
									<div class="card-header" id="classBtn">
										<h2 class="mb-0">
											<!--定期授業のボタン-->
											<button class="btn btn-outline-primary" data-toggle="collapse"
												data-target="#regularClass" aria-expanded="false"
												aria-controls="regularClass">
												定期
											</button>
											<!--非定期授業のボタン-->
											<button class="btn btn-outline-primary" data-toggle="collapse"
												data-target="#irregularClass" aria-expanded="false"
												aria-controls="irregularClass">
												非定期
											</button>
										</h2>
									</div>

									<!--定期授業を登録する。-->
									<div class="collapse" id="regularClass" aria-labelledby="classBtn"
										data-parent="#btnAccordion">

										<div class="card-body">

											<!--エラーメッセージ-->

											<!--定期授業登録のフォーム-->
											<form class="study" id="regularClassForm"
												th:action="@{/admin/regular/register}" th:object="${classDTO}"
												method="post">

												<!--学生リスト-->
												<div class="card mb-3">
													<div class="card-body">
														<h6 class="mb-2">学生</h6>

														<!--検索-->
														<div class="input-group search-box mb-3">
															<input type="text" class="form-control search-input"
																placeholder="Search for..." aria-label="Search">
															<div class="input-group-append">
																<button class="btn btn-primary " type="button">
																	<i class="fas fa-search"></i>
																</button>
															</div>
														</div>

														<table id="studentTableRegular" class="table table-bordered datatable"
															width="100%" cellspacing="0">
															<thead>
																<tr>
																	<th><input type="radio">
																	</th>
																	<th>ID</th>
																	<th>ニックネーム</th>
																	<th>年齢</th>
																	<th>英語レベル</th>
																</tr>
															</thead>

															<tbody>
																<tr th:each="student : ${studentList}">
																	<td><input type="radio"
																			th:value="${student.studentNum}"
																			class="ListCheckbox"
																			th:field="*{studentNum}" required></td>
																	<td th:text="${student.id}">ID</td>
																	<td th:text="${student.nickname}">ニックネーム</td>
																	<td th:text="${student.age}">年齢</td>
																	<td th:text="${student.englishLevel}">英語レベル</td>
																</tr>
															</tbody>
														</table>

													</div>
												</div>

												<!--初回の授業日を設定する-->
												<div class="card mb-3">
													<div class="card-body ">
														<label for="startDate">初回の授業日</label>
														<input type="date" id="startDate" class="form-control mx-1" th:field="*{startDate}" required>
													</div>
												</div>

												<!--授業日時選択-->
												<!-- 授業の曜日 -->
												<div class="card mb-3">
													<div class="card-body">
														<div class="form-group">
															<label for="weekdays">授業曜日</label>
															<!-- 曜日のボタン -->
															<div class="btn-group btn-group-toggle d-flex flex-wrap"
																data-toggle="buttons" id="weekdays">

																<!--日曜日-->
																<label class="btn btn-outline-primary m-1">
																	<input type="checkbox" th:field="*{weekDays}"
																		value="日" autocomplete="off">日
																</label>
																<!--月曜日-->
																<label class="btn btn-outline-primary m-1">
																	<input type="checkbox" th:field="*{weekDays}"
																		value="月" autocomplete="off">月
																</label>
																<!--火曜日-->
																<label class="btn btn-outline-primary m-1">
																	<input type="checkbox" th:field="*{weekDays}"
																		value="火" autocomplete="off">火
																</label>
																<!--水曜日-->
																<label class="btn btn-outline-primary m-1">
																	<input type="checkbox" th:field="*{weekDays}"
																		value="水" autocomplete="off">水
																</label>
																<!--木曜日-->
																<label class="btn btn-outline-primary m-1">
																	<input type="checkbox" th:field="*{weekDays}"
																		value="木" autocomplete="off">木
																</label>
																<!--金曜日-->
																<label class="btn btn-outline-primary m-1">
																	<input type="checkbox" th:field="*{weekDays}"
																		value="金" autocomplete="off">金
																</label>
																<!--土曜日-->
																<label class="btn btn-outline-primary m-1">
																	<input type="checkbox" th:field="*{weekDays}"
																		value="土" autocomplete="off">土
																</label>
															</div>
														</div>

														<!--授業時間-->
														<div class="form-group">
															<label for="startHour">授業時間</label>
															<div class="d-flex align-items-center flex-wrap">

																<!--授業開始の時を選択-->
																<select class="form-control mx-1" style="width: 80px;"
																	id="startHour" th:field="*{startHour}" required>
																	<option value="">--</option>
																	<!--#numbers：Thymeleafテンプレート内で自由に数値のリストを生成できる組み込みオブジェクト-->
																	<!--#numbers.sequence(開始, 終了, 増分)-->
																	<!--例：#numbers.sequence(0, 50, 10) → [0, 10, 20, 30, 40, 50]-->
																	<!-- 増分（ステップ）を省略した場合、1ずつ増加する-->
																	<option th:each="h : ${#numbers.sequence(0,23)}"
																		th:value="${h}" th:text="${h == 0 ? '00' : h}">
																	</option>
																</select>時

																<!--授業開始の分を選択-->
																<select class="form-control mx-1" style="width: 80px;"
																	id="startMinute" th:field="*{startMinute}" required>
																	<option value="">--</option>
																	<option th:each="m : ${#numbers.sequence(0,50,10)}"
																		th:value="${m}" th:text="${m == 0 ? '00' : m}">
																	</option>
																</select>分

																<span> ~ </span>

																<!--授業終了の時を選択-->
																<select class="form-control mx-1" style="width: 80px;"
																	id="endHour" th:field="*{endHour}" required>
																	<option value="">--</option>
																	<option th:each="h: ${#numbers.sequence(0,23)}"
																		th:value="${h}" th:text="${h == 0? '00' : h}">
																	</option>
																</select>時

																<!--授業終了の分を選択-->
																<select class="form-control mx-1" style="width: 80px;"
																	id="endMinute" th:field="*{endMinute}" required>
																	<option value="">--</option>
																	<option th:each="m: ${#numbers.sequence(0,50,10)}"
																		th:value="${m}" th:text="${m == 0 ? '00' : m}">
																	</option>
																</select>分
															</div>
														</div>

													</div>
												</div>

												<!--教材選択-->
												<div class="card mb-3">
													<div class="card-body">
														<label for="text">教材</label>
														<select class="form-control mx-1 w-50" style="width: 80px;"
															id="text" th:field="*{textNum}">
															<option value="">教材を選択する。</option>

															<option th:each="text: ${texts}" th:value="${text.textNum}"
																th:text="${text.name}">
															</option>
														</select>
													</div>
												</div>

												<!--講師リスト-->
												<div class="card mb-3">
													<div class="card-body">
														<h6 class="mb-2">講師</h6>

														<!--更新リストのボタン-->
														<button type="button" class="btn btn-primary mb-2"
															id="fetch-teachers-btn">
															利用可能な講師リストを表示
														</button>

														<table id="teacherTableRegular" class="table table-bordered datatable"
															width="100%" cellspacing="0">
															<thead>
																<tr>
																	<th><input type="radio">
																	</th>
																	<th>ID</th>
																	<th>ニックネーム</th>
																	<th>zoomアカウント</th>
																</tr>
															</thead>

															<tbody id="teacher-table-body">
																<!-- JSでレンダリング -->
															</tbody>
														</table>

														<div class="text-center mt-3">
															<button class="btn btn-secondary w-50">センターへ</button>
														</div>


													</div>
												</div>

												<button type="submit"
													class="btn btn-outline-primary btn-user btn-block">
													登録
												</button>
											</form>
										</div>

									</div>

									<!--非定期授業を登録する。-->
									<div class="collapse" id="irregularClass" aria-labelledby="classBtn"
										data-parent="#btnAccordion">

										<div class="card-body">

											<!--エラーメッセージ-->

											<!--非定期授業登録のフォーム-->
											<form class="study" id="irregularClassForm"
												th:action="@{/admin/irregular/register}" th:object="${classDTO}"
												method="post">

												<!--学生リスト-->
												<div class="card mb-3">
													<div class="card-body">
														<h6 class="mb-2">学生</h6>

														<!--検索-->
														<div class="input-group search-box mb-3">
															<input type="text" class="form-control search-input"
																placeholder="Search for..." aria-label="Search">
															<div class="input-group-append">
																<button class="btn btn-primary " type="button">
																	<i class="fas fa-search"></i>
																</button>
															</div>
														</div>

														<table id="studentTableIrregular" class="table table-bordered datatable"
															width="100%" cellspacing="0">
															<thead>
																<tr>
																	<th><input type="radio">
																	</th>
																	<th>ID</th>
																	<th>ニックネーム</th>
																	<th>年齢</th>
																	<th>英語レベル</th>
																</tr>
															</thead>

															<tbody>
																<tr th:each="student : ${studentList}">
																	<td><input type="radio" th:field="*{studentNum}"
																			th:value="${student.studentNum}"
																			class="ListCheckbox"></td>
																	<td th:text="${student.id}">ID</td>
																	<td th:text="${student.nickname}">ニックネーム</td>
																	<td th:text="${student.age}">年齢</td>
																	<td th:text="${student.englishLevel}">英語レベル</td>
																</tr>
															</tbody>
														</table>

													</div>
												</div>
												<!--授業の種類を選択-->


												<div class="card mb-3 ">
													<div class="card-body">
														<h6 class="mb-3">授業種類</h6>
														<div class="radio-row">

															<label>
																<input type="radio" th:field="*{classType}"
																	value="optional">
																補講
															</label>
															<label>
																<input type="radio" th:field="*{classType}"
																	value="free">
																無料体験
															</label>
														</div>
													</div>
												</div>
												<!--授業日時選択-->

												<div class="card mb-3">
													<div class="card-body">
														<!-- カレンダー -->
														<div class="calendar-box">
															<div id="calendar"></div>
														</div>
														<input type="hidden" name="selectedDate" id="selectedDate">

														<input type="hidden" name="selectedDate" id="selectedDate">
														<!-- 申請可能時間 -->
														<div class="available-time-label">申請可能時間</div>
														<div class="time-buttons-wrap">
															<button type="button" class="time-btn">10:00</button>
															<button type="button" class="time-btn">11:30</button>
															<button type="button" class="time-btn">14:00</button>
															<button type="button" class="time-btn">15:30</button>
															<button type="button" class="time-btn">18:00</button>
															<button type="button" class="time-btn">19:30</button>
															<button type="button" class="time-btn">21:00</button>
														</div>
														<input type="hidden" name="selectedTime" id="selectedTime">

													</div>
												</div>


												<!--講師リスト-->
												<div class="card mb-3">
													<div class="card-body">
														<h6 class="mb-2">講師</h6>

														<!--更新リストのボタン-->
														<button type="button" class="btn btn-primary mb-2"
															id="fetch-teachers-btn">
															利用可能な講師リストを表示
														</button>

														<table id="teacherTableIrregular" class="table table-bordered datatable"
															width="100%" cellspacing="0">
															<thead>
																<tr>
																	<th><input type="radio">
																	</th>
																	<th>ID</th>
																	<th>ニックネーム</th>
																	<th>zoomアカウント</th>
																</tr>
															</thead>

															<tbody id="teacher-table-body">
																<!-- JSでレンダリング -->
															</tbody>
														</table>

														<div class="text-center mt-3">
															<button class="btn btn-secondary w-50">センターへ</button>
														</div>


													</div>
												</div>

												<button type="submit" class="btn btn-outline-primary btn-user btn-block"
													id="applyBtn">
													登録
												</button>
											</form>
										</div>

									</div>

								</div>
							</div>

						</div>
					</div>

				</div>
				<!-- /.container-fluid -->

			</div>
			<!-- End of Main Content -->

			<!-- Footer -->
			<footer class="sticky-footer bg-white">
				<div class="container my-auto">
					<div class="copyright text-center my-auto">
						<span>Copyright &copy; Your Website 2020</span>
					</div>
				</div>
			</footer>
			<!-- End of Footer -->

		</div>
		<!-- End of Content Wrapper -->

	</div>
	<!-- End of Page Wrapper -->

	<!-- Scroll to Top Button-->
	<a class="scroll-to-top rounded" href="#page-top">
		<i class="fas fa-angle-up"></i>
	</a>

	<!-- Logout Modal-->
	<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
					<button class="close" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
					<a class="btn btn-primary" href="login.html">Logout</a>
				</div>
			</div>
		</div>
	</div>



	<!-- jQuery -->
	<script th:src="@{/vendor/jquery/jquery.min.js}"></script>

	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css" />
	<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>

	<!-- Bootstrap core JavaScript-->
	<!--<script th:src="@{/vendor/jquery/jquery.min.js}"></script>-->
	<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

	<!-- Core plugin JavaScript-->
	<script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

	<!-- Custom scripts for all pages-->
	<script th:src="@{/js/sb-admin-2.min.js}"></script>

	<!--calendar 関連JS-->
	<!-- Flatpickr JS CDN -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
	<script src="/js/calendar.js"></script>


	<!--追加JS-->
	<!--<script th:src="@{/js/customtables.js}"></script>-->
	<script th:src="@{/js/registertables.js}"></script>
	<script th:src="@{/js/class-endtime.js}"></script>
	<script th:src="@{/js/class-register-teacher-list.js}"></script>

	<script>
		//listのradio関連js
		// ラジオボタンを直接押さなくても、カラムの要素をクリックすれば選択されるようにする。
		$(document).ready(function () {
			$('.datatable tbody').on('click', 'tr', function (e) {
				if ($(e.target).is('input[type="radio"]')) return;
				let $radio = $(this).find('input[type="radio"]');
				if ($radio.length) {
					$radio.prop('checked', true).trigger('change');
				}
			});

			$('.datatable tbody').on('change', 'input[type="radio"]', function () {
				let $tr = $(this).closest('tr');
			});
		});

	</script>


</body>

</html>