<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>システム設定</title>
    <!-- SB Admin2 공통 CSS -->
    <link th:href="@{/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">
    <style>
        .setting-box { background: #eee; border: 1px solid #888; border-radius: 8px; padding: 30px; }
        .setting-row { margin-bottom: 25px; display: flex; align-items: center; }
        .label { width: 350px; }
        .input-box { width: 120px; padding: 8px; background: #cde; border-radius: 8px; border: 1px solid #aaa; text-align: center;}
        .unit { margin-left: 10px; }
        .set-btn { padding: 8px 32px; border-radius: 8px; border: none; background: #9cf; font-size: 18px;}
    </style>
</head>

<body id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Sidebar Fragment -->
        <div th:replace="~{fragments/sidebar-admin :: sidebar-admin}"></div>

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content">
                <!-- Topbar Fragment -->
                <div th:replace="~{fragments/topbar :: topbar('システム設定')}"></div>
                
                <!-- Begin Page Content -->
                <div class="container-fluid">
                    <div class="card shadow mb-4">
                        <div class="card-body">
							<form method="post" th:action="@{/admin/system}">
							    <div class="setting-box">
							        <div class="setting-row">
							            <span class="label">無料体験の回数設定</span>
							            <input class="input-box" type="number" name="free_trial_count"
							                th:value="${settings['free_trial_count'] != null ? settings['free_trial_count'] : 2}"/> 回
							        </div>
							        <div class="setting-row">
							            <span class="label">補講、無料体験申し込み可能時間設<br>(営業日基準)</span>
							            <input class="input-box" type="number" name="apply_time_limit"
							                th:value="${settings['apply_time_limit'] != null ? settings['apply_time_limit'] : 48}"/> 時間
							        </div>
							        <div class="setting-row">
							            <span class="label">補講pointの有効期限設定</span>
										<input class="input-box" type="number" name="additional_valid_period"
										    th:value="${settings['additional_valid_period'] != null ? settings['additional_valid_period'] : 30}"/> 日
							        </div>
							        <div style="text-align:center;margin-top:40px;">
							            <button class="set-btn" type="submit">設定</button>
							        </div>
							    </div>
							</form>

                            <div th:if="${msg}" style="color:green; text-align:center; margin-top:10px;">[[${msg}]]</div>
                        </div>
                    </div>
                </div>
                <!-- /.container-fluid -->
            </div>
            <!-- End of Main Content -->

			<footer class="sticky-footer bg-white">
			            <div class="container my-auto">
			                <div class="copyright text-center my-auto">
			                    <span>Copyright &copy; Your Website 2020</span>
			                </div>
			            </div>
			        </footer>
			    </div>
			</div>
			<!-- ページトップボタン -->
			<a class="scroll-to-top rounded" href="#page-top">
			    <i class="fas fa-angle-up"></i>
			</a>

			<!-- ログアウトモーダル -->
			<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
			     aria-hidden="true">
			    <div class="modal-dialog" role="document">
			        <div class="modal-content">
			            <div class="modal-header">
			                <h5 class="modal-title" id="exampleModalLabel">ログアウトしますか？</h5>
			                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
			                    <span aria-hidden="true">×</span>
			                </button>
			            </div>
			            <div class="modal-body">「Logout」を選択すると現在のセッションが終了します。</div>
			            <div class="modal-footer">
			                <button class="btn btn-secondary" type="button" data-dismiss="modal">キャンセル</button>
			                <a class="btn btn-primary" href="login.html">Logout</a>
			            </div>
			        </div>
			    </div>
			</div>

    <!-- 로그아웃 모달 등 필요한 fragment도 추가 가능 -->

    <!-- JS 리소스 (SB Admin2 표준) -->
    <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
    <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>
    <script th:src="@{/js/sb-admin-2.min.js}"></script>
</body>
</html>
